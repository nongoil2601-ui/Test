name: Auto Create Pull Request
on:
  push:
    branches-ignore:
      - main
  
jobs:
  create-pull-request:
    runs-on: ubuntu-latest
    permissions: 
      contents: write
      pull-requests: write
      statuses: write
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      # ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏™‡∏±‡πà‡∏á Merge ‡πÅ‡∏•‡∏∞‡∏•‡∏ö Branch ‡∏ó‡∏¥‡πâ‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ üóëÔ∏è
      - name: Merge Pull Request
        if: ${{ steps.cpr_step.outputs.pr_number }}
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          echo "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ Merge PR ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç ${{ steps.cpr_step.outputs.pr_number }}..."
          
          # ‡πÄ‡∏û‡∏¥‡πà‡∏° --delete-branch ‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏Å‡∏¥‡πà‡∏á oil ‡∏ö‡∏ô GitHub ‡∏ó‡∏¥‡πâ‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡∏á‡∏≤‡∏ô
          gh pr merge ${{ steps.cpr_step.outputs.pr_number }} --merge --auto --delete-branch